<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">                         <!-- character encoding -->  
    <title>Course Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;      /*  nicer font */
            margin: 40px;
            background-color: #f4f4f4;         /* light background */
        }

        h1 {
            text-align: center;
            color: #333;
        }

        #createButton {
            padding: 10px 20px;                  /* larger buttons*/
            background-color: #28a761;          /* green create button*/
            color: white;
            border: none;
            border-radius: 5px;                  /* rounded corners*/
            margin-bottom: 20px;
            cursor: pointer;
            font-size: 16px;
        }

        #createButton:hover {
            background-color: #218838;       /*hover effect for create button*/
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);   /* shadow effect */
        }

        th,                                                 
        td {                                                                
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;        
            text-align: left;
        }

        th {
            background-color: #007BFF;        /* blue header */
            color: white;
        }

        tr:hover {                              /* row hover effect */
            background-color: #f1f1f1;
        }

        .action-btn {                           /* button styles */
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }

        .update-btn {                          /* yellow update button */
            background-color: #ffc107;
        }

        .update-btn:hover {                /* hover effect for update button */
            background-color: #e0a800;
        }

        .delete-btn {                       /* red delete button */
            background-color: #dc3545;
        }

        .delete-btn:hover { 
            background-color: #c82333;
        }
    </style>
</head>

<body>

    <h1>Courses</h1>
    <button id="createButton" onclick="createCourse()">Create</button> <!-- create button -->

    <table id="courseTable">
        <thead>
            <tr>
                <th>id</th>
                <th>Course Name</th>
                <th>Student Name</th>
                <th>Duration</th>
                <th>Update</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody id="courseTableBody">                   <!-- Course rows will be populated here -->
        </tbody>
    </table>

    <script>
        function loadCourses() {                        // fetches course data from my server
            fetch("http://127.0.0.1:5000/courses")      // GET request to my Flask server to get all courses.
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Network response was not ok");
                    }
                    return response.json();
                })
                .then(courses => {                          // loops through all courses received and adds a table row for each
                    const tableBody = document.getElementById("courseTableBody");    // gets the empty tbody element  
                    tableBody.innerHTML = "";             // Clear previous content and ready for upload


            courses.forEach(course => {
                const row = document.createElement("tr");           // loops through each course & creates a new row
                row.innerHTML = `
                    <td>${course.id}</td>
                    <td>${course.CourseName}</td>
                    <td>${course.StudentName}</td>
                    <td>${course.Duration}</td>
                    <td><button class="action-btn update-btn" onclick="updateCourse(${course.id})">Update</button></td>
                    <td><button class="action-btn delete-btn" onclick="deleteCourse(${course.id})">Delete</button></td>
                `;
                tableBody.appendChild(row);  // adds completed row to table
            });
        })
        .catch(error => {
            console.error("Error loading courses:", error);
        });
        }

        function createCourse() {
            alert("Create button clicked");
            // Your create form logic here
        }

        function updateCourse(id) {
            alert("Update course " + id);
            // Your update form logic here
        }

        function deleteCourse(id) {
            alert("Delete course " + id);
            // Your delete confirmation and logic here
        }

        // Initial load
        loadCourses();
    </script>
</body>

</html>